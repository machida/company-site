= form_for(@attached_image, :remote => (params[:action] == 'new' ? true : false)) do |f|
  - if @attached_image.errors.any?
    #error_explanation
      %h2
        = pluralize(@attached_image.errors.count, "error")
        prohibited this attached_image from being saved:
      %ul
        - @attached_image.errors.full_messages.each do |msg|
          %li= msg
  %fieldset
    %legend.required
      Required fields
    .field
      = f.label :image, :class => 'required'
      %br/
      = f.text_field :image, :required => true
    .field
      = f.label :alt, :class => 'required'
      %br/
      = f.text_area :alt, :required => true
    - if params[:attachment]
      .field
        = f.label :attached_image, :class => 'required'
        %br/
        = f.file_field :attached_image, :required => true
  .actions
    = f.submit :disable_with => 'Submitting...'